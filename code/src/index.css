@tailwind base;
@tailwind components;
@tailwind utilities;

/* Sage Minimalist Design System */

@layer base {
  :root {
    /* Vibrant Glassmorphism Design System */
    --background: 140 30% 98%;
    --foreground: 150 40% 10%;

    --card: 0 0% 100%;
    --card-foreground: 150 40% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 150 40% 10%;

    --primary: 150 50% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 280 45% 65%;
    --secondary-foreground: 0 0% 100%;

    --muted: 145 20% 90%;
    --muted-foreground: 150 25% 35%;

    --accent: 45 90% 60%;
    --accent-foreground: 150 40% 10%;

    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 145 20% 82%;
    --input: 145 20% 82%;
    --ring: 150 50% 45%;

    --radius: 1rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 150 30% 20%;
    --sidebar-primary: 150 50% 45%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 280 45% 65%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 145 20% 85%;
    --sidebar-ring: 150 50% 45%;

    /* Glass effect colors with more variety */
    --glass-bg: 0 0% 100%;
    --glass-border: 145 30% 88%;
    --glass-shadow: 150 20% 70%;

    /* Bubble colors */
    --bubble-1: 150 60% 55%;
    --bubble-2: 280 50% 65%;
    --bubble-3: 45 85% 60%;
    --bubble-4: 200 55% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-light;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-normal tracking-tight;
  }
}

/* Glassmorphism & Liquid Design */
@layer components {
  /* Glass card effect - iOS style */
  .minimal-card {
    background: linear-gradient(135deg,
      hsla(var(--glass-bg), 0.7) 0%,
      hsla(var(--glass-bg), 0.5) 100%
    );
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid hsl(var(--glass-border) / 0.3);
    box-shadow:
      0 8px 32px 0 hsl(var(--glass-shadow) / 0.1),
      inset 0 1px 0 0 hsl(var(--glass-border) / 0.2),
      0 1px 2px 0 hsl(var(--glass-shadow) / 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .minimal-card:hover {
    background: linear-gradient(135deg,
      hsla(var(--glass-bg), 0.8) 0%,
      hsla(var(--glass-bg), 0.6) 100%
    );
    box-shadow:
      0 12px 40px 0 hsl(var(--glass-shadow) / 0.15),
      inset 0 1px 0 0 hsl(var(--glass-border) / 0.3),
      0 2px 4px 0 hsl(var(--glass-shadow) / 0.08);
    transform: translateY(-2px);
  }

  /* Journal card - textured paper style */
  .journal-card {
    background: linear-gradient(135deg,
      hsl(45 40% 96%) 0%,
      hsl(45 35% 94%) 100%
    );
    backdrop-filter: blur(10px);
    border: 1px solid hsl(45 30% 88%);
    box-shadow:
      0 4px 16px 0 hsla(280, 30%, 50%, 0.08),
      inset 0 1px 0 0 hsla(45, 40%, 100%, 0.5),
      inset 0 -1px 0 0 hsla(45, 20%, 80%, 0.3);
    position: relative;
  }

  /* Paper texture overlay */
  .journal-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 24px,
        hsla(45, 30%, 70%, 0.05) 24px,
        hsla(45, 30%, 70%, 0.05) 25px
      );
    border-radius: inherit;
    pointer-events: none;
  }

  .journal-card:hover {
    background: linear-gradient(135deg,
      hsl(45 40% 97%) 0%,
      hsl(45 35% 95%) 100%
    );
    box-shadow:
      0 8px 24px 0 hsla(280, 30%, 50%, 0.12),
      inset 0 1px 0 0 hsla(45, 40%, 100%, 0.6),
      inset 0 -1px 0 0 hsla(45, 20%, 80%, 0.4);
  }

  /* Journal date tab */
  .journal-date-tab {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 0.5rem 0.75rem;
    background: linear-gradient(135deg,
      hsla(280, 45%, 65%, 0.15) 0%,
      hsla(280, 45%, 65%, 0.08) 100%
    );
    border-radius: 0.5rem;
    border-left: 3px solid hsl(var(--secondary));
  }

  /* Journal text with handwritten feel */
  .journal-text {
    line-height: 1.8;
    letter-spacing: 0.01em;
  }

  /* Cute floating icon animation */
  .floating-icon {
    animation: float-gentle 3s ease-in-out infinite;
    filter: drop-shadow(0 2px 4px rgba(168, 85, 247, 0.3));
    transform-origin: center;
    transition: all 0.3s ease;
  }

  @keyframes float-gentle {
    0%, 100% {
      transform: translateY(0px) rotate(-2deg);
    }
    50% {
      transform: translateY(-8px) rotate(2deg);
    }
  }

  /* Add a subtle glow pulse on hover */
  .floating-icon:hover {
    animation: float-gentle 3s ease-in-out infinite, glow-pulse 2s ease-in-out infinite;
  }

  @keyframes glow-pulse {
    0%, 100% {
      filter: drop-shadow(0 2px 4px rgba(168, 85, 247, 0.3));
    }
    50% {
      filter: drop-shadow(0 4px 8px rgba(168, 85, 247, 0.5));
    }
  }

  /* Liquid gradient background */
  .sage-gradient {
    background: linear-gradient(
      135deg,
      hsl(var(--background)) 0%,
      hsl(var(--muted)) 50%,
      hsl(var(--background)) 100%
    );
    background-size: 200% 200%;
    animation: gradient-shift 15s ease infinite;
  }

  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  .glass-button.sage {
    background: linear-gradient(
      135deg,
      hsla(120, 35%, 82%, 0.9) 0%,
      hsla(120, 35%, 78%, 1) 100%
    );
    color: white; 
    border: 1px solid hsl(120 35% 70% / 0.3);
    transition: all 0.3s ease;
  }

  .glass-button.sage:hover {
    background: linear-gradient(
      135deg,
      hsla(120, 35%, 70%, 0.9) 0%,
      hsla(120, 35%, 65%, 1) 100%
    );
  }

  /* Liquid Glass Sidebar - Floating 3D Pill */
  .liquid-glass-sidebar {
    background: linear-gradient(
      135deg,
      hsla(var(--glass-bg), 0.75) 0%,
      hsla(var(--glass-bg), 0.6) 50%,
      hsla(280, 45%, 65%, 0.15) 100%
    );
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border: 1px solid hsla(var(--border), 0.3);
    /* Enhanced 3D shadow for floating effect */
    box-shadow:
      /* Main depth shadow */
      0 30px 80px -10px hsla(150, 50%, 45%, 0.25),
      /* Mid-level shadow */
      0 15px 40px -5px hsla(var(--glass-shadow), 0.15),
      /* Close shadow for definition */
      0 8px 16px 0 hsla(var(--glass-shadow), 0.12),
      /* Inner highlight for glass effect */
      inset 0 1px 0 0 hsla(var(--glass-border), 0.4),
      /* Subtle outer glow */
      0 0 0 1px hsla(150, 50%, 45%, 0.1);
    /* 3D transform hint */
    transform: translateZ(0);
    will-change: box-shadow, transform;
  }

  /* Liquid Glass Content Area */
  .liquid-glass-content {
    background: linear-gradient(
      135deg,
      hsla(var(--glass-bg), 0.85) 0%,
      hsla(var(--glass-bg), 0.7) 50%,
      hsla(150, 50%, 45%, 0.05) 100%
    );
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border: 1px solid hsla(var(--border), 0.2);
    box-shadow:
      0 20px 60px 0 hsla(var(--glass-shadow), 0.12),
      inset 0 1px 0 0 hsla(var(--glass-border), 0.3),
      0 4px 8px 0 hsla(var(--glass-shadow), 0.06);
  }

  /* Custom Scrollbar - Minimal & Aesthetic */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(
      180deg,
      hsla(150, 50%, 45%, 0.3) 0%,
      hsla(280, 45%, 65%, 0.3) 100%
    );
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(
      180deg,
      hsla(150, 50%, 45%, 0.5) 0%,
      hsla(280, 45%, 65%, 0.5) 100%
    );
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  /* Firefox scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: hsla(150, 50%, 45%, 0.3) transparent;
  }

  /* iOS-style Glass Effect */
  .ios-glass {
    position: relative;
    overflow: hidden;
  }

  .ios-glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      transparent 100%
    );
    pointer-events: none;
  }

  .ios-glass::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.3) 50%,
      transparent 100%
    );
    pointer-events: none;
  }

  /* iOS-style Scrollbar */
  .ios-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .ios-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .ios-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    transition: background 0.2s ease;
  }

  .ios-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
  }

  /* Firefox */
  .ios-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
  }

  /* Markdown Content Styles */
  .markdown-content {
    @apply text-foreground/90;
  }

  .markdown-content h1 {
    @apply text-4xl font-bold mt-8 mb-4 text-foreground;
    @apply bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent;
  }

  .markdown-content h2 {
    @apply text-3xl font-bold mt-6 mb-3 text-foreground;
  }

  .markdown-content h3 {
    @apply text-2xl font-semibold mt-5 mb-2 text-foreground;
  }

  .markdown-content h4 {
    @apply text-xl font-semibold mt-4 mb-2 text-foreground;
  }

  .markdown-content h5 {
    @apply text-lg font-semibold mt-3 mb-2 text-foreground/90;
  }

  .markdown-content h6 {
    @apply text-base font-semibold mt-3 mb-2 text-foreground/80;
  }

  .markdown-content p {
    @apply mb-4 leading-relaxed;
  }

  .markdown-content ul,
  .markdown-content ol {
    @apply mb-4 ml-6 space-y-2;
  }

  .markdown-content ul {
    @apply list-disc;
  }

  .markdown-content ol {
    @apply list-decimal;
  }

  .markdown-content li {
    @apply leading-relaxed;
  }

  .markdown-content li > ul,
  .markdown-content li > ol {
    @apply mt-2 mb-0;
  }

  .markdown-content a {
    @apply text-primary hover:text-secondary underline decoration-primary/30 hover:decoration-secondary/50;
    @apply transition-colors duration-200;
  }

  .markdown-content code {
    @apply px-1.5 py-0.5 rounded bg-muted/60 text-primary font-mono text-sm;
    @apply border border-border/30;
  }

  .markdown-content pre {
    @apply mb-4 p-4 rounded-xl bg-muted/40 border border-border/30;
    @apply overflow-x-auto;
  }

  .markdown-content pre code {
    @apply p-0 bg-transparent border-0 text-foreground/90;
    @apply block;
  }

  .markdown-content blockquote {
    @apply border-l-4 border-primary/40 pl-4 pr-4 py-3 my-4;
    @apply bg-primary/5 rounded-r-lg;
    @apply text-foreground/90;
  }

  .markdown-content blockquote p {
    @apply mb-2 last:mb-0 not-italic;
  }

  /* Callout types - enhanced styling based on content */
  .markdown-content blockquote strong {
    @apply font-semibold not-italic block mb-2;
    @apply text-base;
  }

  /* NOTE callouts - blue */
  .markdown-content blockquote:has(strong:first-child:contains("NOTE")) {
    @apply border-blue-500/60 bg-blue-50/80;
  }
  .markdown-content blockquote strong:first-child:contains("NOTE") {
    @apply text-blue-700;
  }

  /* TIP callouts - green */
  .markdown-content blockquote:has(strong:first-child:contains("TIP")) {
    @apply border-green-500/60 bg-green-50/80;
  }
  .markdown-content blockquote strong:first-child:contains("TIP") {
    @apply text-green-700;
  }

  /* WARNING callouts - orange/amber */
  .markdown-content blockquote:has(strong:first-child:contains("WARNING")) {
    @apply border-amber-500/60 bg-amber-50/80;
  }
  .markdown-content blockquote strong:first-child:contains("WARNING") {
    @apply text-amber-700;
  }

  /* IMPORTANT callouts - purple */
  .markdown-content blockquote:has(strong:first-child:contains("IMPORTANT")) {
    @apply border-purple-500/60 bg-purple-50/80;
  }
  .markdown-content blockquote strong:first-child:contains("IMPORTANT") {
    @apply text-purple-700;
  }

  /* INFO callouts - cyan */
  .markdown-content blockquote:has(strong:first-child:contains("INFO")) {
    @apply border-cyan-500/60 bg-cyan-50/80;
  }
  .markdown-content blockquote strong:first-child:contains("INFO") {
    @apply text-cyan-700;
  }

  .markdown-content table {
    @apply w-full mb-4 border-collapse;
  }

  .markdown-content thead {
    @apply bg-muted/40;
  }

  .markdown-content th {
    @apply px-4 py-2 text-left font-semibold border border-border/30;
  }

  .markdown-content td {
    @apply px-4 py-2 border border-border/30;
  }

  .markdown-content tbody tr:nth-child(even) {
    @apply bg-muted/20;
  }

  .markdown-content hr {
    @apply my-8 border-0 h-px;
    @apply bg-gradient-to-r from-transparent via-border to-transparent;
  }

  .markdown-content img {
    @apply max-w-full h-auto rounded-lg my-4;
    @apply shadow-md;
  }

  .markdown-content strong {
    @apply font-semibold text-foreground;
  }

  .markdown-content em {
    @apply italic;
  }

  .markdown-content del {
    @apply line-through text-foreground/60;
  }

  /* Code syntax highlighting improvements */
  .markdown-content .hljs {
    @apply bg-transparent;
  }
}

